{% extends "base.html" %}
{% block content %}

<!-- About / Purpose -->
<div class="alert alert-info">
  <strong>GT Movies Store</strong> â€” a demo Django web app for browsing movies, adding them to a cart,
  placing orders, and writing reviews. Log in to post reviews and checkout; admins manage the catalog
  and users in the Django admin.
</div>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h3 mb-0">Catalog</h1>
  <form class="d-flex" method="get">
    <input class="form-control me-2" type="search" name="q" placeholder="Search title..." value="{{ q }}">
    <button class="btn btn-primary" type="submit">Search</button>
  </form>
</div>

{% if movies %}
  <div class="row g-3">
    {% for m in movies %}
      <div class="col-12 col-sm-6 col-md-4 col-lg-3">
        <div class="card h-100">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">
              <a href="{% url 'movie_detail' m.pk %}">{{ m.title }}</a>
            </h5>
            <p class="card-text text-muted small flex-grow-1">
              {{ m.description|truncatechars:90 }}
            </p>
            <div class="d-flex justify-content-between align-items-center">
              <span class="fw-bold">${{ m.price }}</span>
              <span class="badge bg-secondary">Stock: {{ m.stock }}</span>
            </div>
            <div class="d-flex justify-content-between align-items-center mt-2">
              <a href="{% url 'movie_detail' m.pk %}" class="btn btn-sm btn-outline-secondary">Details</a>
              <a href="{% url 'add_to_cart' m.pk %}" class="btn btn-sm btn-primary">Add to Cart</a>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">No movies found.</p>
{% endif %}
{% endblock %}
